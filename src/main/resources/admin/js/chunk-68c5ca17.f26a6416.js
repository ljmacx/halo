(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68c5ca17"],{"66b4":function(e,t,a){"use strict";var n=a("9efd"),o="/api/admin/carinfo",d={listAllBrand:function(){return Object(n["a"])({url:"".concat(o,"/brand/list"),params:{},method:"get"})},listAllModel:function(){return Object(n["a"])({url:"".concat(o,"/model/list"),params:{},method:"get"})},listModelOfBrand:function(e){return Object(n["a"])({url:"".concat(o,"/model/blist"),params:{brandId:e},method:"get"})},createBrand:function(e){return Object(n["a"])({url:"".concat(o,"/brand/addBrand"),data:e,method:"post"})},createModel:function(e){return Object(n["a"])({url:"".concat(o,"/model/addModel"),data:e,method:"post"})},updateBrand:function(e,t){return Object(n["a"])({url:"".concat(o,"/brand/").concat(e),data:t,method:"put"})},updateModel:function(e,t){return Object(n["a"])({url:"".concat(o,"/model/").concat(e),data:t,method:"put"})},deleteBrand:function(e){return Object(n["a"])({url:"".concat(o,"/brand/").concat(e),method:"delete"})},deleteModel:function(e){return Object(n["a"])({url:"".concat(o,"/model/").concat(e),method:"delete"})}};t["a"]=d},"7eea":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-header-index-wide"},[a("a-row",{attrs:{gutter:12}},[a("a-col",{style:{"padding-bottom":"12px"},attrs:{xl:10,lg:10,md:10,sm:24,xs:24}},[a("a-card",{attrs:{title:e.title,bodyStyle:{padding:"16px"}}},[a("a-form",{attrs:{layout:"horizontal"}},[a("a-form-item",{attrs:{label:"选择品牌："}},[a("brand-select-tree",{attrs:{brands:e.brandList},model:{value:e.modelToCreate.brandId,callback:function(t){e.$set(e.modelToCreate,"brandId",t)},expression:"modelToCreate.brandId"}})],1),a("a-form-item",{attrs:{label:"车型名：",help:"* 页面上所显示的中文名称"}},[a("a-input",{model:{value:e.modelToCreate.name,callback:function(t){e.$set(e.modelToCreate,"name",t)},expression:"modelToCreate.name"}})],1),a("a-form-item",["create"===e.formType?a("a-button",{attrs:{type:"primary"},on:{click:e.handleSaveClick}},[e._v("保存")]):a("a-button-group",[a("a-button",{attrs:{type:"primary"},on:{click:e.handleSaveClick}},[e._v("更新")]),"update"===e.formType?a("a-button",{attrs:{type:"dashed"},on:{click:e.handleAddModel}},[e._v("返回添加")]):e._e()],1),"update"===e.formType?a("a-popconfirm",{attrs:{title:"你确定要删除【"+e.modelToCreate.name+"】品牌？",okText:"确定",cancelText:"取消"},on:{confirm:function(t){return e.handleDeleteModel(e.modelToCreate.id)}}},[a("a-button",{staticStyle:{float:"right"},attrs:{type:"danger"}},[e._v("删除")])],1):e._e()],1)],1)],1)],1),a("a-col",{style:{"padding-bottom":"12px"},attrs:{xl:14,lg:14,md:14,sm:24,xs:24}},[a("a-card",{attrs:{title:"所有车型",bodyStyle:{padding:"16px"}}},e._l(e.allModels,function(t){return a("a-tooltip",{key:t.id,attrs:{placement:"topLeft"}},[a("template",{slot:"title"}),a("a-tag",{staticStyle:{"margin-bottom":"8px"},attrs:{color:"blue"},on:{click:function(a){return e.handleEditModel(t)}}},[e._v(e._s(t.name))])],2)}),1)],1)],1)],1)},o=[],d=(a("7f7f"),a("66b4")),r=a("f2f5"),l={components:{BrandSelectTree:r["a"]},data:function(){return{formType:"create",allModels:[],modelToCreate:{},brandList:[]}},computed:{title:function(){return this.modelToCreate.id?"修改品牌":"添加品牌"}},created:function(){this.loadBrands(),this.loadModels()},methods:{loadBrands:function(){var e=this;d["a"].listAllBrand().then(function(t){e.brandList=t.data.data})},loadModels:function(){var e=this;d["a"].listAllModel().then(function(t){e.allModels=t.data.data})},handleSaveClick:function(){this.createOrUpdateModel()},handleAddModel:function(){this.formType="create",this.modelToCreate={}},handleEditModel:function(e){this.modelToCreate=e,this.formType="update"},handleDeleteModel:function(e){var t=this;d["a"].deleteModel(e).then(function(e){t.$message.success("删除成功！"),t.loadModels(),t.handleAddModel()})},createOrUpdateModel:function(){var e=this;this.modelToCreate.name?(this.modelToCreate.id?d["a"].updateModel(this.modelToCreate.id,this.modelToCreate).then(function(t){e.$message.success("更新成功！"),e.loadModels(),e.modelToCreate={}}):d["a"].createModel(this.modelToCreate).then(function(t){e.$message.success("保存成功！"),e.loadModels(),e.modelToCreate={}}),this.handleAddModel()):this.$notification["error"]({message:"提示",description:"车型名称不能为空！"})}}},c=l,i=a("2877"),s=Object(i["a"])(c,n,o,!1,null,null,null);t["default"]=s.exports},f2f5:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-tree-select",{attrs:{treeData:e.brandTreeData,placeholder:"请选择汽车品牌",treeDefaultExpandAll:"",treeDataSimpleMode:!0,allowClear:!0,value:e.brandIdString},on:{change:e.handleSelectionChange}})},o=[],d=(a("6b54"),a("7f7f"),a("c5f6"),{name:"BrandSelectTree",model:{prop:"brandId",event:"change"},props:{brandId:{type:Number,required:!1,default:0},brands:{type:Array,required:!1,default:function(){return[]}}},computed:{brandTreeData:function(){return this.brands.map(function(e){return{id:e.id,title:e.name,value:e.id.toString()}})},brandIdString:function(){return this.brandId.toString()}},methods:{handleSelectionChange:function(e,t,a){this.$log.debug("value: ",e),this.$log.debug("label: ",t),this.$log.debug("extra: ",a),this.$emit("change",e?parseInt(e):0)}}}),r=d,l=a("2877"),c=Object(l["a"])(r,n,o,!1,null,null,null);t["a"]=c.exports}}]);